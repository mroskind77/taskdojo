```mdx
---
title: 'Create Disciple (Sensei)'
api: 'POST /create-disciple'
description: 'Sensei creates a new disciple account'
---

Endpoint

```
POST /make-server-4010be06/create-disciple
```

Sensei-only endpoint. Create a new disciple account linked to the sensei. Automatically creates auth account and default tasks.

---

Headers

<ParamField header="Authorization" type="string" required>
  Sensei's bearer token
</ParamField>

---

Request Body

<ParamField body="name" type="string" required>
  Disciple's display name
  
  Example: `"Emma Smith"`
</ParamField>

<ParamField body="email" type="string" required>
  Disciple's email address (for login)
  
  Example: `"emma@example.com"`
</ParamField>

<ParamField body="password" type="string" required>
  Initial password for disciple account
  
  Sensei should share this with disciple securely
</ParamField>

<ParamField body="ageCategory" type="string" required>
  Age bracket
  
  Options: `grasshopper` (6-9), `cricket` (10-12), `stickbug` (13-17), `mantis` (18+)
</ParamField>

---

Response

<ResponseField name="disciple" type="object">
  Newly created disciple profile
  
  <Expandable title="disciple properties">
    <ResponseField name="id" type="string">
      Disciple's user ID
    </ResponseField>
    
    <ResponseField name="email" type="string">
      Email address
    </ResponseField>
    
    <ResponseField name="name" type="string">
      Display name
    </ResponseField>
    
    <ResponseField name="userType" type="string">
      Always `"disciple"`
    </ResponseField>
    
    <ResponseField name="ageCategory" type="string">
      Age bracket
    </ResponseField>
    
    <ResponseField name="points" type="number">
      Starts at 0
    </ResponseField>
    
    <ResponseField name="beltLevel" type="string">
      Starts at `"white"`
    </ResponseField>
    
    <ResponseField name="streak" type="number">
      Starts at 0
    </ResponseField>
    
    <ResponseField name="senseiId" type="string">
      Sensei's user ID (calling sensei)
    </ResponseField>
    
    <ResponseField name="createdAt" type="string">
      ISO 8601 timestamp
    </ResponseField>
  </Expandable>
</ResponseField>

---

Example Request

```typescript
const response = await fetch('https://YOUR_PROJECT.supabase.co/functions/v1/make-server-4010be06/create-disciple', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${senseiAccessToken}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name: 'Emma Smith',
    email: 'emma@example.com',
    password: 'tempPassword123',
    ageCategory: 'cricket'  // 10-12 years
  })
})

const { disciple } = await response.json()

// Share credentials with disciple
console.log(`Email: ${disciple.email}`)
console.log('Password: tempPassword123')
```

---

Example Response

```json
{
  "disciple": {
    "id": "abc123-disciple-user-id",
    "email": "emma@example.com",
    "name": "Emma Smith",
    "userType": "disciple",
    "ageCategory": "cricket",
    "points": 0,
    "beltLevel": "white",
    "streak": 0,
    "senseiId": "xyz789-sensei-user-id",
    "disciples": [],
    "createdAt": "2024-01-15T10:30:00Z",
    "lastActiveDate": "2024-01-15T10:30:00Z",
    "selectedAvatar": "cricket",
    "totalTasksCompleted": 0,
    "graceTokensAvailable": 2
  }
}
```

---

Automatic Features

Default Tasks Created

Age-appropriate tasks are automatically created for the disciple:

Grasshopper (6-9 years):
Wake up on time (1 point)
Get out of bed (1 point)
Brush teeth - morning (1 point)
Wash hands and face (1 point)
Get dressed (2 points)
Eat breakfast (2 points)
Brush teeth - nighttime (1 point)
Put on pajamas (1 point)

Cricket (10-12 years):
Wake up on time (1 point)
Morning routine (3 points)
Eat breakfast (2 points)
Pack backpack (2 points)
Complete homework (5 points)
Eat dinner (2 points)
Evening routine (3 points)

Stickbug (13-17 years):
Morning routine (3 points)
Complete homework (5 points)
Study for tests (7 points)
Evening routine (3 points)

Mantis (18+ years):
Morning routine (2 points)
Daily responsibilities (5 points)
Evening routine (2 points)

Sensei's Disciples List Updated

Disciple ID is automatically added to sensei's `disciples` array.

---

Error Responses

<ResponseExample>
```json 403 - Not a Sensei
{
  "error": "Only sensei accounts can create disciples"
}
```

```json 400 - Email Already Exists
{
  "error": "User with this email already exists"
}
```

```json 400 - Invalid Input
{
  "error": "Email, password, name, and ageCategory are required"
}
```

```json 401 - Unauthorized
{
  "error": "Unauthorized"
}
```
</ResponseExample>

---

Complete Workflow

```typescript
async function createDiscipleAccount(discipleData: DiscipleInput) {
  try {
    // 1. Create disciple account
    const response = await fetch('/create-disciple', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${senseiAccessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(discipleData)
    })
    
    if (!response.ok) {
      throw new Error('Failed to create disciple')
    }
    
    const { disciple } = await response.json()
    
    // 2. Update local sensei state
    setDisciples(prev => [...prev, disciple])
    
    // 3. Show success message
    toast.success(`${disciple.name} created successfully!`)
    
    // 4. Display credentials for sensei to share
    showCredentialsDialog({
      email: disciple.email,
      password: discipleData.password,
      instructions: 'Share these credentials securely with your disciple.'
    })
    
    // 5. Track event
    trackIntercomEvent('disciple-created', {
      discipleId: disciple.id,
      ageCategory: disciple.ageCategory
    })
    
    return disciple
    
  } catch (error) {
    console.error('Failed to create disciple:', error)
    toast.error('Failed to create disciple account')
    throw error
  }
}
```

---

Security Considerations

<Warning>
Password Management:
Sensei creates the initial password
Share securely with disciple (not via email/text)
Recommend disciple changes password after first login
</Warning>

<Info>
Email Verification:
Emails are auto-confirmed (`email_confirm: true`)
No email verification required since email server isn't configured
</Info>

<Tip>
Best Practices:
Use temporary, easy-to-remember passwords like `tempPassword123`
Encourage disciples to update their password immediately
Store disciple credentials securely until shared
</Tip>

---

Notes

<Info>
Disciple is automatically linked to the calling sensei. The `senseiId` field is set to the authenticated sensei's user ID.
</Info>

<Tip>
Default avatar is assigned based on age category (grasshopper → grasshopper avatar, cricket → cricket avatar, etc.).
</Tip>

---

Next Steps

<CardGroup cols={2}>
  <Card title="Get Disciples" icon="users" href="/api-reference/disciples/get-disciples">
    View all disciples
  </Card>
  
  <Card title="Approve Tasks" icon="check-circle" href="/api-reference/tasks/approve-task">
    Approve disciple tasks
  </Card>
  
  <Card title="Managing Disciples" icon="users-gear" href="/user-guide/sensei/managing-disciples">
    Sensei guide
  </Card>
  
  <Card title="Sensei Insights" icon="chart-line" href="/user-guide/sensei/insights">
    Track progress
  </Card>
</CardGroup>
```
