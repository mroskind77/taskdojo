---
title: "API Reference -> Profile -> Get Profile"
description: "Retrieve current user profile and check for broken streaks"
---

```mdx
---
title: 'Get Profile'
api: 'GET /profile'
description: 'Retrieve current user profile and check for broken streaks'
---

Endpoint
```

GET /make-server-4010be06/profile

```

Get the authenticated user's profile, including automatic grace token reset and streak break detection.

---

Headers

<ParamField header="Authorization" type="string" required>
  Bearer token
  
```

Authorization: Bearer YOUR_ACCESS_TOKEN

````
</ParamField>

---

Response

<ResponseField name="profile" type="object | null">
User profile object, or `null` if profile doesn't exist

<Expandable title="profile properties">
  <ResponseField name="id" type="string">
    User ID
  </ResponseField>
  
  <ResponseField name="name" type="string">
    Display name
  </ResponseField>
  
  <ResponseField name="email" type="string">
    Email address
  </ResponseField>
  
  <ResponseField name="userType" type="string">
    `master`, `sensei`, or `disciple`
  </ResponseField>
  
  <ResponseField name="ageCategory" type="string">
    `grasshopper`, `cricket`, `stickbug`, or `mantis`
  </ResponseField>
  
  <ResponseField name="points" type="number">
    Total points earned
  </ResponseField>
  
  <ResponseField name="beltLevel" type="string">
    Current belt: `white`, `yellow`, `orange`, `green`, `blue`, `purple`, `brown`, `black`
  </ResponseField>
  
  <ResponseField name="streak" type="number">
    Consecutive days active
  </ResponseField>
  
  <ResponseField name="lastActiveDate" type="string">
    ISO 8601 timestamp of last activity
  </ResponseField>
  
  <ResponseField name="graceTokensAvailable" type="number">
    Remaining Streak Savior rescue tokens (0-2)
  </ResponseField>
  
  <ResponseField name="lastGraceTokenReset" type="string">
    ISO 8601 timestamp of last token reset (rolls every 7 days)
  </ResponseField>
  
  <ResponseField name="streakSaviorOffered" type="boolean">
    Whether Streak Savior quest has been offered
  </ResponseField>
  
  <ResponseField name="selectedAvatar" type="string">
    Currently selected avatar skin
  </ResponseField>
  
  <ResponseField name="totalTasksCompleted" type="number">
    Lifetime task completions
  </ResponseField>
  
  <ResponseField name="earlyCompletions" type="number">
    Tasks completed before due time
  </ResponseField>
  
  <ResponseField name="focusSessionsCompleted" type="number">
    Focus timer sessions completed
  </ResponseField>
  
  <ResponseField name="senseiId" type="string | null">
    Sensei's user ID (disciples only)
  </ResponseField>
  
  <ResponseField name="disciples" type="array">
    Array of disciple user IDs (senseis only)
  </ResponseField>
</Expandable>
</ResponseField>

<ResponseField name="streakBroken" type="boolean">
`true` if streak was broken (>1 day since last activity)
</ResponseField>

---

Example Request

```typescript
const response = await fetch('https://YOUR_PROJECT.supabase.co/functions/v1/make-server-4010be06/profile', {
method: 'GET',
headers: {
  'Authorization': `Bearer ${accessToken}`
}
})

const data = await response.json()

if (data.streakBroken && data.profile.graceTokensAvailable > 0) {
// Show Streak Savior offer
showStreakSaviorDialog()
}
````

---

Example Response

```json
{
  "profile": {
    "id": "123e4567-e89b-12d3-a456-426614174000",
    "email": "alex@example.com",
    "name": "Alex Johnson",
    "userType": "master",
    "ageCategory": "mantis",
    "points": 245,
    "beltLevel": "yellow",
    "streak": 14,
    "lastActiveDate": "2024-01-15T10:30:00Z",
    "graceTokensAvailable": 2,
    "lastGraceTokenReset": "2024-01-10T00:00:00Z",
    "streakSaviorOffered": false,
    "selectedAvatar": "dojo-spirit",
    "totalTasksCompleted": 42,
    "earlyCompletions": 15,
    "focusSessionsCompleted": 8,
    "senseiId": null,
    "disciples": [],
    "createdAt": "2024-01-01T00:00:00Z"
  },
  "streakBroken": false
}
```

---

Automatic Features

Grace Token Reset

Grace tokens automatically reset every 7 days (rolling window):

```javascript
// Checked on every GET /profile call
if (daysSinceLastReset >= 7) {
  profile.graceTokensAvailable = 2
  profile.lastGraceTokenReset = now
}
```

Streak Break Detection

Streak is considered broken if \>1 day has passed since `lastActiveDate`:

```javascript
const daysSinceActive = (today - lastActiveDate) / (1000 * 60 * 60 * 24)

if (daysSinceActive > 1 && streak > 0) {
  streakBroken = true
  streakSaviorOffered = true  // Offer rescue quest
}
```

---

Error Responses

<ResponseExample>

```json 401 - Unauthorized
{
  "error": "Unauthorized"
}
```


```json 500 - Server Error
{
  "error": "Failed to get profile"
}
```

</ResponseExample>

---

Use Cases

Check Streak Status on App Load

```typescript
async function checkStreakOnLoad() {
  const { profile, streakBroken } = await getProfile()
  
  if (streakBroken) {
    if (profile.graceTokensAvailable > 0) {
      // Offer Streak Savior rescue quest
      setShowStreakSavior(true)
    } else {
      // No tokens left - streak is lost
      toast.error(`Your ${profile.streak}-day streak was broken. Start a new one!`)
    }
  }
}
```

Refresh Profile After Task Completion

```typescript
async function completeTask(taskId, quality) {
  const result = await completeTaskAPI(taskId, quality)
  
  // Refresh profile to get updated points/belt
  const { profile } = await getProfile()
  
  setProfile(profile)
  
  if (result.beltLevelUp) {
    showCelebration()
  }
}
```

---

Notes

<Info>
  Call this endpoint on app load to restore user session and check streak status.
</Info>

<Tip>
  Grace tokens reset automatically every 7 days (rolling window), so check `graceTokensAvailable` regularly.
</Tip>

<Warning>
  If `streakBroken: true` and `graceTokensAvailable > 0`, immediately show the Streak Savior rescue quest offer.
</Warning>

---

Next Steps

<CardGroup cols={2}>
  <Card title="Update Profile" icon="pen" href="/api-reference/profile/update-profile">
    Modify profile settings
  </Card>
  <Card title="Streak Savior" icon="shield-heart" href="/api-reference/streaks/streak-savior">
    Rescue broken streak
  </Card>
  <Card title="Get Tasks" icon="list" href="/api-reference/tasks/get-tasks">
    Load user's tasks
  </Card>
  <Card title="Belt System" icon="medal" href="/user-guide/progression/belt-system">
    Understanding belt progression
  </Card>
</CardGroup>