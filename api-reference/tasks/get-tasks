```mdx
---
title: 'Get Tasks'
api: 'GET /tasks'
description: 'Retrieve tasks with filtering and pagination'
---

Endpoint

```
GET /make-server-4010be06/tasks
```

Get tasks for the authenticated user (or a disciple if sensei).

---

Headers

<ParamField header="Authorization" type="string" required>
  Bearer token
  
  ```
  Authorization: Bearer YOUR_ACCESS_TOKEN
  ```
</ParamField>

---

Query Parameters

<ParamField query="userId" type="string">
  Optional. User ID to fetch tasks for.
  
Defaults to authenticated user
Senseis can fetch disciple tasks
Non-senseis cannot fetch other users' tasks
</ParamField>

<ParamField query="filter" type="string">
  Optional. Filter tasks by status
  
  Options:
`pending` - Only incomplete tasks
`completed` - Only completed/approved tasks
omit for all tasks
</ParamField>

<ParamField query="limit" type="number" default="50">
  Number of tasks to return (pagination)
</ParamField>

<ParamField query="offset" type="number" default="0">
  Number of tasks to skip (pagination)
</ParamField>

---

Response

<ResponseField name="tasks" type="array">
  Array of task objects
  
  <Expandable title="task properties">
    <ResponseField name="id" type="string">
      Unique task identifier
    </ResponseField>
    
    <ResponseField name="userId" type="string">
      Owner's user ID
    </ResponseField>
    
    <ResponseField name="title" type="string">
      Task title/description
    </ResponseField>
    
    <ResponseField name="category" type="string">
      `morning`, `afterschool`, `nighttime`, `academic`, `creative`, `physical`, `social`, `mindfulness`, `other`
    </ResponseField>
    
    <ResponseField name="points" type="number">
      Base points (before modifiers)
    </ResponseField>
    
    <ResponseField name="icon" type="string">
      Icon identifier for UI
    </ResponseField>
    
    <ResponseField name="dueTime" type="string | null">
      Optional due time (HH:MM format or ISO 8601)
    </ResponseField>
    
    <ResponseField name="completed" type="boolean">
      Whether task is completed
    </ResponseField>
    
    <ResponseField name="completedAt" type="string">
      ISO 8601 timestamp of completion
    </ResponseField>
    
    <ResponseField name="quality" type="number">
      Quality rating (1-5 stars)
    </ResponseField>
    
    <ResponseField name="timeliness" type="string">
      `early`, `on-time`, `late`, `very-late`, or `no-due-time`
    </ResponseField>
    
    <ResponseField name="approved" type="boolean">
      Whether sensei approved (disciples only)
    </ResponseField>
    
    <ResponseField name="approvedBy" type="string">
      Sensei's user ID who approved
    </ResponseField>
    
    <ResponseField name="approvedAt" type="string">
      ISO 8601 timestamp of approval
    </ResponseField>
    
    <ResponseField name="senseiNote" type="string">
      Optional note from sensei on approval
    </ResponseField>
    
    <ResponseField name="createdAt" type="string">
      ISO 8601 timestamp of creation
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="pagination" type="object">
  Pagination metadata
  
  <Expandable title="pagination properties">
    <ResponseField name="limit" type="number">
      Number of tasks requested
    </ResponseField>
    
    <ResponseField name="offset" type="number">
      Number of tasks skipped
    </ResponseField>
    
    <ResponseField name="total" type="number">
      Total tasks matching filter
    </ResponseField>
    
    <ResponseField name="hasMore" type="boolean">
      Whether more tasks exist beyond current page
    </ResponseField>
  </Expandable>
</ResponseField>

---

Example Requests

Get All Tasks

```typescript
const response = await fetch('https://YOUR_PROJECT.supabase.co/functions/v1/make-server-4010be06/tasks', {
  headers: {
    'Authorization': `Bearer ${accessToken}`
  }
})

const { tasks, pagination } = await response.json()
```

Get Pending Tasks Only

```typescript
const response = await fetch('/tasks?filter=pending', {
  headers: {
    'Authorization': `Bearer ${accessToken}`
  }
})

const { tasks } = await response.json()
```

Pagination

```typescript
// Get next page (items 50-99)
const response = await fetch('/tasks?limit=50&offset=50', {
  headers: {
    'Authorization': `Bearer ${accessToken}`
  }
})

const { tasks, pagination } = await response.json()

if (pagination.hasMore) {
  // Load more button
}
```

Sensei Fetching Disciple Tasks

```typescript
const discipleId = 'disciple-user-id'

const response = await fetch(`/tasks?userId=${discipleId}`, {
  headers: {
    'Authorization': `Bearer ${senseiAccessToken}`
  }
})

const { tasks } = await response.json()
```

---

Example Response

```json
{
  "tasks": [
    {
      "id": "task:user123:1234567890:abc123",
      "userId": "user123",
      "title": "Complete homework",
      "category": "academic",
      "points": 10,
      "icon": "book",
      "dueTime": "17:00",
      "completed": true,
      "completedAt": "2024-01-15T16:45:00Z",
      "quality": 5,
      "timeliness": "early",
      "timelinessModifier": 0.10,
      "approved": true,
      "approvedBy": "sensei456",
      "approvedAt": "2024-01-15T17:00:00Z",
      "senseiNote": "Excellent work! Very thorough.",
      "createdAt": "2024-01-15T08:00:00Z"
    },
    {
      "id": "task:user123:1234567891:def456",
      "userId": "user123",
      "title": "Practice piano",
      "category": "creative",
      "points": 5,
      "icon": "music",
      "dueTime": null,
      "completed": false,
      "quality": 0,
      "approved": false,
      "createdAt": "2024-01-15T09:00:00Z"
    }
  ],
  "pagination": {
    "limit": 50,
    "offset": 0,
    "total": 2,
    "hasMore": false
  }
}
```

---

Error Responses

<ResponseExample>
```json 401 - Unauthorized
{
  "error": "Unauthorized"
}
```

```json 403 - Cannot View Other User's Tasks
{
  "error": "Unauthorized to view these tasks"
}
```

```json 500 - Server Error
{
  "error": "Failed to get tasks"
}
```
</ResponseExample>

---

Task Filtering Examples

Dashboard (Pending Only)

```typescript
async function loadDashboard() {
  const { tasks } = await fetch('/tasks?filter=pending').then(r => r.json())
  
  // Show only incomplete tasks
  setTasks(tasks)
}
```

Task History (Completed Only)

```typescript
async function loadHistory() {
  const { tasks } = await fetch('/tasks?filter=completed').then(r => r.json())
  
  // Show completed tasks with points earned
  setCompletedTasks(tasks)
}
```

Infinite Scroll

```typescript
const [tasks, setTasks] = useState([])
const [offset, setOffset] = useState(0)
const limit = 50

async function loadMore() {
  const response = await fetch(`/tasks?limit=${limit}&offset=${offset}`)
  const { tasks: newTasks, pagination } = await response.json()
  
  setTasks(prev => [...prev, ...newTasks])
  setOffset(prev => prev + limit)
  
  return pagination.hasMore
}
```

---

Notes

<Info>
Tasks are automatically sorted by `createdAt` (newest first) for consistent pagination.
</Info>

<Tip>
Cache task data locally and only fetch when needed. Use optimistic updates for better UX.
</Tip>

<Warning>
Sensei Permission: Senseis can only fetch tasks for their own disciples. Attempting to fetch another user's tasks will return a 403 error.
</Warning>

---

Next Steps

<CardGroup cols={2}>
  <Card title="Create Task" icon="plus" href="/api-reference/tasks/create-task">
    Add a new task
  </Card>
  
  <Card title="Complete Task" icon="check" href="/api-reference/tasks/complete-task">
    Mark task as complete
  </Card>
  
  <Card title="Update Task" icon="pen" href="/api-reference/tasks/update-task">
    Edit task details
  </Card>
  
  <Card title="Delete Task" icon="trash" href="/api-reference/tasks/delete-task">
    Remove a task
  </Card>
</CardGroup>
```
