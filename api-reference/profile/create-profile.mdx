---
title: "API Reference -> Profile -> Create Profile"
description: "Create user profile after sign up"
---

```mdx
---
title: 'Create Profile'
api: 'POST /profile'
description: 'Create user profile after sign up'
---

Endpoint
```

POST /make-server-4010be06/profile

```

Create a new user profile with onboarding information. Required after sign up to set user type, age category, and name.

---

Headers

<ParamField header="Authorization" type="string" required>
  Bearer token from sign up
  
```

Authorization: Bearer YOUR_ACCESS_TOKEN

````
</ParamField>

---

Request Body

<ParamField body="name" type="string" required>
User's display name

Example: `"John Doe"`
</ParamField>

<ParamField body="userType" type="string" required>
Account type

Options: `"master"`, `"sensei"`, `"disciple"`
</ParamField>

<ParamField body="ageCategory" type="string" required>
Age bracket for belt progression multipliers

Options: `"grasshopper"` (6-9), `"cricket"` (10-12), `"stickbug"` (13-17), `"mantis"` (18+)
</ParamField>

<ParamField body="senseiId" type="string">
Required for disciples only. The sensei's user ID

Example: `"123e4567-e89b-12d3-a456-426614174000"`
</ParamField>

---

Response

<ResponseField name="profile" type="object">
Newly created user profile

<Expandable title="profile properties">
  <ResponseField name="id" type="string">
    User's unique identifier (matches auth user ID)
  </ResponseField>
  
  <ResponseField name="email" type="string">
    User's email address
  </ResponseField>
  
  <ResponseField name="name" type="string">
    Display name
  </ResponseField>
  
  <ResponseField name="userType" type="string">
    `master`, `sensei`, or `disciple`
  </ResponseField>
  
  <ResponseField name="ageCategory" type="string">
    `grasshopper`, `cricket`, `stickbug`, or `mantis`
  </ResponseField>
  
  <ResponseField name="points" type="number">
    Total points earned (starts at 0)
  </ResponseField>
  
  <ResponseField name="beltLevel" type="string">
    Current belt rank (starts at `white`)
  </ResponseField>
  
  <ResponseField name="streak" type="number">
    Consecutive days active (starts at 0)
  </ResponseField>
  
  <ResponseField name="selectedAvatar" type="string">
    Default avatar based on age category
  </ResponseField>
  
  <ResponseField name="createdAt" type="string">
    ISO 8601 timestamp of profile creation
  </ResponseField>
  
  <ResponseField name="lastActiveDate" type="string">
    ISO 8601 timestamp of last activity
  </ResponseField>
  
  <ResponseField name="senseiId" type="string | null">
    Sensei's user ID (for disciples only)
  </ResponseField>
  
  <ResponseField name="disciples" type="array">
    Array of disciple user IDs (for senseis only)
  </ResponseField>
  
  <ResponseField name="graceTokensAvailable" type="number">
    Streak Savior rescue tokens (starts at 2)
  </ResponseField>
  
  <ResponseField name="totalTasksCompleted" type="number">
    Total tasks completed (for avatar unlocks)
  </ResponseField>
</Expandable>
</ResponseField>

---

Example Requests

Master Account

```typescript
const response = await fetch('https://YOUR_PROJECT.supabase.co/functions/v1/make-server-4010be06/profile', {
method: 'POST',
headers: {
  'Authorization': `Bearer ${accessToken}`,
  'Content-Type': 'application/json'
},
body: JSON.stringify({
  name: 'Alex Johnson',
  userType: 'master',
  ageCategory: 'mantis'  // 18+
})
})

const data = await response.json()
````

Disciple Account

```typescript
const response = await fetch('https://YOUR_PROJECT.supabase.co/functions/v1/make-server-4010be06/profile', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${accessToken}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name: 'Emma Smith',
    userType: 'disciple',
    ageCategory: 'cricket',  // 10-12 years
    senseiId: 'abc123-sensei-user-id'
  })
})
```

---

Example Response

```json
{
  "profile": {
    "id": "123e4567-e89b-12d3-a456-426614174000",
    "email": "alex@example.com",
    "name": "Alex Johnson",
    "userType": "master",
    "ageCategory": "mantis",
    "points": 0,
    "beltLevel": "white",
    "streak": 0,
    "createdAt": "2024-01-15T10:30:00Z",
    "lastActiveDate": "2024-01-15T10:30:00Z",
    "senseiId": null,
    "disciples": [],
    "graceTokensAvailable": 2,
    "lastGraceTokenReset": "2024-01-15T10:30:00Z",
    "streakSaviorOffered": false,
    "selectedAvatar": "mantis",
    "totalTasksCompleted": 0,
    "earlyCompletions": 0,
    "focusSessionsCompleted": 0,
    "discipleCount": 0
  }
}
```

---

Error Responses

<ResponseExample>

```json 400 - Missing Sensei ID
{
  "error": "Disciple accounts must have a sensei"
}
```


```json 400 - Invalid Age/Type Combination
{
  "error": "Grasshopper and Cricket age categories require Disciple account type"
}
```


```json 401 - Unauthorized
{
  "error": "Unauthorized"
}
```


```json 500 - Server Error
{
  "error": "Failed to create profile"
}
```

</ResponseExample>

---

Validation Rules

<AccordionGroup>
  <Accordion title="Age Category Restrictions">
    Grasshopper (6-9) and Cricket (10-12) age categories MUST use Disciple user type.

    Adults (Mantis) and teens (Stickbug) can choose any user type.
  </Accordion>
  <Accordion title="Disciple Requirements">
    Disciple accounts MUST provide a valid `senseiId`.

    The sensei must exist and have `userType: "sensei"`.
  </Accordion>
  <Accordion title="Default Avatar Assignment">
    Avatars are auto-assigned based on age category: Grasshopper → `grasshopper` avatar Cricket → `cricket` avatar Stickbug → `stickbug` avatar Mantis → `mantis` avatar
  </Accordion>
</AccordionGroup>

---

Notes

<Warning>
  Call this endpoint immediately after sign up. Users cannot use the app without a profile.
</Warning>

<Info>
  If creating a disciple profile, the disciple ID is automatically added to the sensei's `disciples` array.
</Info>

<Tip>
  Store the profile data locally after creation to avoid unnecessary API calls.
</Tip>

---

Next Steps

<CardGroup cols={2}>
  <Card title="Get Profile" icon="user" href="/api-reference/profile/get-profile">
    Fetch profile data
  </Card>
  <Card title="Update Profile" icon="pen" href="/api-reference/profile/update-profile">
    Modify profile settings
  </Card>
  <Card title="Create Task" icon="plus" href="/api-reference/tasks/create-task">
    Create your first task
  </Card>
  <Card title="Onboarding Guide" icon="book" href="/user-guide/onboarding">
    User onboarding flow
  </Card>
</CardGroup>